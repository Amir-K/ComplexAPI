{"version":3,"file":"../app/api/balances/route.js","mappings":";;;;;;;;;;AAAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA2C;AACQ;AAE5C,MAAME,MAAMD,0CAAmBA,CAAC;IACrC,IAAI;QACF,MAAME,WAAW,MAAMC,MACrB,CAAC,gGAAgG,CAAC;QAEpG,MAAMC,OAAQ,MAAMF,SAASG,IAAI;QAEjC,IAAI,CAACH,SAASI,EAAE,EAAE;YAChB,MAAM,IAAIC,MAAMH,KAAKI,KAAK,IAAI;QAChC;QAEA,MAAMC,eAAeL,KAAKM,MAAM,CAACC,GAAG,CAAC,CAACC,KAAKC;YACzC,MAAMC,kBACJD,UAAU,IAAI,IAAIT,KAAKM,MAAM,CAACK,KAAK,CAAC,GAAGF,OAAOG,MAAM,CAAC,CAACC,KAAKC,OAASD,MAAMC,MAAM;YAClF,MAAMC,SAASP;YACf,MAAMQ,aAAaN,kBAAkBK;YAErC,OAAO;gBACLL;gBACAK;gBACAC;YACF;QACF;QAEAC,WAAW;YACT,OAAOtB,mBAAYA,CAACM,IAAI,CAAC;gBACvBI;gBACAa,WAAWlB,KAAKkB,SAAS;YAC3B;QACF,GAAG;IAEH,6BAA6B;IAC7B,kBAAkB;IAClB,+BAA+B;IAC/B,MAAM;IACR,EAAE,OAAOd,OAAO;QACde,QAAQf,KAAK,CAAC,yBAAyBA;QACvC,OAAOT,mBAAYA,CAACM,IAAI,CAAC;YAAEG,OAAO;QAAwB,GAAG;YAAEgB,QAAQ;QAAI;IAC7E;AACF,GAAG;;;AC1C4F;AACvC;AACqB;AACC;AAC9E;AACA;AACA;AACA,wBAAwB,mCAAmB;AAC3C;AACA,cAAc,oBAAS;AACvB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,YAAY;AACZ,CAAC;AACD;AACA;AACA;AACA,QAAQ,sDAAsD;AAC9D;AACA,WAAW,0BAAW;AACtB;AACA;AACA,KAAK;AACL;AAC0F;;AAE1F;;;;;;;;AC/BA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA","sources":["webpack://my-app/external node-commonjs \"node:process\"","webpack://my-app/external commonjs \"next/dist/server/app-render/after-task-async-storage.external.js\"","webpack://my-app/external node-commonjs \"node:buffer\"","webpack://my-app/external commonjs \"next/dist/compiled/next-server/app-page.runtime.prod.js\"","webpack://my-app/external commonjs2 \"assert\"","webpack://my-app/external node-commonjs \"node:zlib\"","webpack://my-app/external commonjs2 \"os\"","webpack://my-app/external commonjs2 \"stream\"","webpack://my-app/external commonjs2 \"util\"","webpack://my-app/external commonjs2 \"fs\"","webpack://my-app/external commonjs \"next/dist/server/app-render/work-async-storage.external.js\"","webpack://my-app/./app/api/balances/route.ts","webpack://my-app/?46d7","webpack://my-app/external commonjs2 \"path\"","webpack://my-app/external node-commonjs \"node:assert\"","webpack://my-app/external node-commonjs \"node:http\"","webpack://my-app/external node-commonjs \"node:stream/web\"","webpack://my-app/external commonjs2 \"inspector\"","webpack://my-app/external node-commonjs \"node:https\"","webpack://my-app/external commonjs \"next/dist/compiled/next-server/app-route.runtime.prod.js\"","webpack://my-app/external node-commonjs \"node:string_decoder\"","webpack://my-app/external commonjs2 \"crypto\"","webpack://my-app/external commonjs2 \"https\"","webpack://my-app/external node-commonjs \"node:stream\"","webpack://my-app/external node-commonjs \"node:util\"","webpack://my-app/external commonjs \"next/dist/server/app-render/work-unit-async-storage.external.js\"","webpack://my-app/external node-commonjs \"node:fs\"","webpack://my-app/external node-commonjs \"node:url\"","webpack://my-app/external commonjs2 \"worker_threads\"","webpack://my-app/external commonjs2 \"zlib\"","webpack://my-app/external node-commonjs \"node:path\"","webpack://my-app/external node-commonjs \"node:net\"","webpack://my-app/external node-commonjs \"node:crypto\"","webpack://my-app/external commonjs2 \"stream/promises\"","webpack://my-app/external node-commonjs \"node:events\"","webpack://my-app/external commonjs2 \"buffer\"","webpack://my-app/external commonjs2 \"url\"","webpack://my-app/external commonjs2 \"child_process\"","webpack://my-app/external commonjs2 \"http\"","webpack://my-app/external commonjs2 \"tty\"","webpack://my-app/external commonjs2 \"async_hooks\"","webpack://my-app/external commonjs2 \"events\""],"sourcesContent":["module.exports = require(\"node:process\");","module.exports = require(\"next/dist/server/app-render/after-task-async-storage.external.js\");","module.exports = require(\"node:buffer\");","module.exports = require(\"next/dist/compiled/next-server/app-page.runtime.prod.js\");","module.exports = require(\"assert\");","module.exports = require(\"node:zlib\");","module.exports = require(\"os\");","module.exports = require(\"stream\");","module.exports = require(\"util\");","module.exports = require(\"fs\");","module.exports = require(\"next/dist/server/app-render/work-async-storage.external.js\");","import { NextResponse } from \"next/server\";\r\nimport { withInstrumentation } from \"livedebugger\";\r\n\r\nexport const GET = withInstrumentation(async () => {\r\n  try {\r\n    const response = await fetch(\r\n      `https://balanceservice.livelybush-67f33f33.canadacentral.azurecontainerapps.io/api/balancechange`\r\n    );\r\n    const data = (await response.json()) as { result: number[]; timestamp: string; error?: string };\r\n\r\n    if (!response.ok) {\r\n      throw new Error(data.error || \"Calculation service error\");\r\n    }\r\n\r\n    const calculations = data.result.map((val, index) => {\r\n      const previousBalance =\r\n        index === 0 ? 0 : data.result.slice(0, index).reduce((acc, curr) => acc + curr, 0);\r\n      const change = val;\r\n      const newBalance = previousBalance + change;\r\n\r\n      return {\r\n        previousBalance,\r\n        change,\r\n        newBalance,\r\n      };\r\n    });\r\n\r\n    setTimeout(() => {\r\n      return NextResponse.json({\r\n        calculations,\r\n        timestamp: data.timestamp,\r\n      });\r\n    }, 5000);\r\n\r\n    // return NextResponse.json({\r\n    //   calculations,\r\n    //   timestamp: data.timestamp,\r\n    // });\r\n  } catch (error) {\r\n    console.error(\"Error in calculation:\", error);\r\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 });\r\n  }\r\n}); ","import { AppRouteRouteModule } from \"next/dist/server/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/server/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/server/lib/patch-fetch\";\nimport * as userland from \"C:\\\\Git\\\\ComplexAPI\\\\app\\\\api\\\\balances\\\\route.ts\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/balances/route\",\n        pathname: \"/api/balances\",\n        filename: \"route\",\n        bundlePath: \"app/api/balances/route\"\n    },\n    resolvedPagePath: \"C:\\\\Git\\\\ComplexAPI\\\\app\\\\api\\\\balances\\\\route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return _patchFetch({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\nexport { routeModule, workAsyncStorage, workUnitAsyncStorage, serverHooks, patchFetch,  };\n\n//# sourceMappingURL=app-route.js.map","module.exports = require(\"path\");","module.exports = require(\"node:assert\");","module.exports = require(\"node:http\");","module.exports = require(\"node:stream/web\");","module.exports = require(\"inspector\");","module.exports = require(\"node:https\");","module.exports = require(\"next/dist/compiled/next-server/app-route.runtime.prod.js\");","module.exports = require(\"node:string_decoder\");","module.exports = require(\"crypto\");","module.exports = require(\"https\");","module.exports = require(\"node:stream\");","module.exports = require(\"node:util\");","module.exports = require(\"next/dist/server/app-render/work-unit-async-storage.external.js\");","module.exports = require(\"node:fs\");","module.exports = require(\"node:url\");","module.exports = require(\"worker_threads\");","module.exports = require(\"zlib\");","module.exports = require(\"node:path\");","module.exports = require(\"node:net\");","module.exports = require(\"node:crypto\");","module.exports = require(\"stream/promises\");","module.exports = require(\"node:events\");","module.exports = require(\"buffer\");","module.exports = require(\"url\");","module.exports = require(\"child_process\");","module.exports = require(\"http\");","module.exports = require(\"tty\");","module.exports = require(\"async_hooks\");","module.exports = require(\"events\");"],"names":["NextResponse","withInstrumentation","GET","response","fetch","data","json","ok","Error","error","calculations","result","map","val","index","previousBalance","slice","reduce","acc","curr","change","newBalance","setTimeout","timestamp","console","status"],"sourceRoot":""}