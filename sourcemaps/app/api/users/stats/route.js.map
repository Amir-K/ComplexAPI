{"version":3,"file":"../app/api/users/stats/route.js","mappings":";;;;;;;;;;AAAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAwD;AACL;AAEnD,eAAeE,QAAQC,MAAc,EAAEC,OAAc;IACnD,MAAMC,QAAQ,CAAC;;;;;;;;;;;;;;;;;;;;;EAqBf,CAAC;IAED,gEAAgE;IAEhE,OAAO,EAAE;AACX;AAEA,eAAeC,kBAAkBC,MAAe;IAC9C,OAAO,EAAE;AACT,+BAA+B;AACjC;AAEO,MAAMC,MAAMP,0CAAmBA,CAAC,OAAOQ;IAC5C,IAAI;QACF,MAAM,EAAEC,YAAY,EAAE,GAAG,IAAIC,IAAIF,QAAQG,GAAG;QAC5C,MAAML,SAASG,aAAaG,GAAG,CAAC,YAAYC,SAASJ,aAAaG,GAAG,CAAC,aAAcE;QACpF,MAAMC,SAAS,MAAMV,kBAAkBC;QACvC,OAAOP,mBAAYA,CAACiB,IAAI,CAACD;IAC3B,EAAE,OAAOE,OAAO;QACdC,QAAQD,KAAK,CAAC,0BAA0BA;QACxC,OAAOlB,mBAAYA,CAACiB,IAAI,CAAC;YAAEC,OAAO;QAAwB,GAAG;YAAEE,QAAQ;QAAI;IAC7E;AACF,GAAG;;;AC/C4F;AACvC;AACqB;AACK;AAClF;AACA;AACA;AACA,wBAAwB,mCAAmB;AAC3C;AACA,cAAc,oBAAS;AACvB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,YAAY;AACZ,CAAC;AACD;AACA;AACA;AACA,QAAQ,sDAAsD;AAC9D;AACA,WAAW,0BAAW;AACtB;AACA;AACA,KAAK;AACL;AAC0F;;AAE1F;;;;;;;;AC/BA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA","sources":["webpack://my-app/external node-commonjs \"node:process\"","webpack://my-app/external commonjs \"next/dist/server/app-render/after-task-async-storage.external.js\"","webpack://my-app/external node-commonjs \"node:buffer\"","webpack://my-app/external commonjs \"next/dist/compiled/next-server/app-page.runtime.prod.js\"","webpack://my-app/external commonjs2 \"assert\"","webpack://my-app/external node-commonjs \"node:zlib\"","webpack://my-app/external commonjs2 \"os\"","webpack://my-app/external commonjs2 \"stream\"","webpack://my-app/external commonjs2 \"util\"","webpack://my-app/external commonjs2 \"fs\"","webpack://my-app/external commonjs \"next/dist/server/app-render/work-async-storage.external.js\"","webpack://my-app/external commonjs2 \"path\"","webpack://my-app/external node-commonjs \"node:assert\"","webpack://my-app/external node-commonjs \"node:http\"","webpack://my-app/external node-commonjs \"node:stream/web\"","webpack://my-app/external commonjs2 \"inspector\"","webpack://my-app/external node-commonjs \"node:https\"","webpack://my-app/external commonjs \"next/dist/compiled/next-server/app-route.runtime.prod.js\"","webpack://my-app/external node-commonjs \"node:string_decoder\"","webpack://my-app/./app/api/users/stats/route.ts","webpack://my-app/?3072","webpack://my-app/external commonjs2 \"crypto\"","webpack://my-app/external commonjs2 \"https\"","webpack://my-app/external node-commonjs \"node:stream\"","webpack://my-app/external node-commonjs \"node:util\"","webpack://my-app/external commonjs \"next/dist/server/app-render/work-unit-async-storage.external.js\"","webpack://my-app/external node-commonjs \"node:fs\"","webpack://my-app/external node-commonjs \"node:url\"","webpack://my-app/external commonjs2 \"worker_threads\"","webpack://my-app/external commonjs2 \"zlib\"","webpack://my-app/external node-commonjs \"node:path\"","webpack://my-app/external node-commonjs \"node:net\"","webpack://my-app/external node-commonjs \"node:crypto\"","webpack://my-app/external commonjs2 \"stream/promises\"","webpack://my-app/external node-commonjs \"node:events\"","webpack://my-app/external commonjs2 \"buffer\"","webpack://my-app/external commonjs2 \"url\"","webpack://my-app/external commonjs2 \"child_process\"","webpack://my-app/external commonjs2 \"http\"","webpack://my-app/external commonjs2 \"tty\"","webpack://my-app/external commonjs2 \"async_hooks\"","webpack://my-app/external commonjs2 \"events\""],"sourcesContent":["module.exports = require(\"node:process\");","module.exports = require(\"next/dist/server/app-render/after-task-async-storage.external.js\");","module.exports = require(\"node:buffer\");","module.exports = require(\"next/dist/compiled/next-server/app-page.runtime.prod.js\");","module.exports = require(\"assert\");","module.exports = require(\"node:zlib\");","module.exports = require(\"os\");","module.exports = require(\"stream\");","module.exports = require(\"util\");","module.exports = require(\"fs\");","module.exports = require(\"next/dist/server/app-render/work-async-storage.external.js\");","module.exports = require(\"path\");","module.exports = require(\"node:assert\");","module.exports = require(\"node:http\");","module.exports = require(\"node:stream/web\");","module.exports = require(\"inspector\");","module.exports = require(\"node:https\");","module.exports = require(\"next/dist/compiled/next-server/app-route.runtime.prod.js\");","module.exports = require(\"node:string_decoder\");","import { NextRequest, NextResponse } from \"next/server\";\r\nimport { withInstrumentation } from \"livedebugger\";\r\n\r\nasync function getData(_query: string, _params: any[]) {\r\n  const query = `\r\n    SELECT TOP 100\r\n      c.FirstName,\r\n      c.LastName,\r\n      c.Email,\r\n      o.OrderID,\r\n      p.ProductName,\r\n      o.Quantity,\r\n      o.OrderDate,\r\n      DATEDIFF(DAY, o.OrderDate, GETDATE()) AS DaysSinceOrder\r\n    FROM dbo.Orders o\r\n    INNER JOIN dbo.Customers c ON o.CustomerID = c.CustomerID\r\n    INNER JOIN dbo.Products p ON o.ProductID = p.ProductID\r\n    WHERE \r\n      o.OrderDate >= '2024-01-01' AND o.OrderDate < '2025-01-01' -- No YEAR() anymore\r\n      AND p.ProductName LIKE 'Pro%' -- No leading %\r\n      AND c.Country IN ('Australia', 'United States', 'Canada', 'Germany', 'France')\r\n    ORDER BY \r\n      c.LastName ASC, \r\n      o.OrderDate DESC\r\n    OPTION (MAXDOP 1);\r\n  `;\r\n\r\n  // const result = (await pool.request().query(query)).recordset;\r\n\r\n  return [];\r\n}\r\n\r\nasync function getUserStatistics(userId?: number) {\r\n  return [];\r\n  //return await getData(\"\", []);\r\n}\r\n\r\nexport const GET = withInstrumentation(async (request: NextRequest) => {\r\n  try {\r\n    const { searchParams } = new URL(request.url);\r\n    const userId = searchParams.get('userId') ? parseInt(searchParams.get('userId')!) : undefined;\r\n    const result = await getUserStatistics(userId);\r\n    return NextResponse.json(result);\r\n  } catch (error) {\r\n    console.error(\"Error executing query:\", error);\r\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 });\r\n  }\r\n}); ","import { AppRouteRouteModule } from \"next/dist/server/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/server/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/server/lib/patch-fetch\";\nimport * as userland from \"C:\\\\Git\\\\ComplexAPI\\\\app\\\\api\\\\users\\\\stats\\\\route.ts\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/users/stats/route\",\n        pathname: \"/api/users/stats\",\n        filename: \"route\",\n        bundlePath: \"app/api/users/stats/route\"\n    },\n    resolvedPagePath: \"C:\\\\Git\\\\ComplexAPI\\\\app\\\\api\\\\users\\\\stats\\\\route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return _patchFetch({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\nexport { routeModule, workAsyncStorage, workUnitAsyncStorage, serverHooks, patchFetch,  };\n\n//# sourceMappingURL=app-route.js.map","module.exports = require(\"crypto\");","module.exports = require(\"https\");","module.exports = require(\"node:stream\");","module.exports = require(\"node:util\");","module.exports = require(\"next/dist/server/app-render/work-unit-async-storage.external.js\");","module.exports = require(\"node:fs\");","module.exports = require(\"node:url\");","module.exports = require(\"worker_threads\");","module.exports = require(\"zlib\");","module.exports = require(\"node:path\");","module.exports = require(\"node:net\");","module.exports = require(\"node:crypto\");","module.exports = require(\"stream/promises\");","module.exports = require(\"node:events\");","module.exports = require(\"buffer\");","module.exports = require(\"url\");","module.exports = require(\"child_process\");","module.exports = require(\"http\");","module.exports = require(\"tty\");","module.exports = require(\"async_hooks\");","module.exports = require(\"events\");"],"names":["NextResponse","withInstrumentation","getData","_query","_params","query","getUserStatistics","userId","GET","request","searchParams","URL","url","get","parseInt","undefined","result","json","error","console","status"],"sourceRoot":""}